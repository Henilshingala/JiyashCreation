{% extends "app/base.html" %}
{% load static %}

{% block title %}{{ collection_type|title }} Collection{% endblock %}

{% block content %}
<div class="container py-4">
  <h1 class="mb-4">{{ collection_type|title }} Collection</h1>
  <p class="text-muted">Browse categories and subcategories.</p>

  {% if categories %}
    <div class="row g-4">
      {% for cat in categories %}
        <div class="col-12 col-md-6 col-lg-4">
          <div class="card h-100 shadow-sm">
            {% if cat.image %}
              <img src="{{ cat.image.url }}" class="card-img-top" alt="{{ cat.name }}">
            {% endif %}
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">
                <a href="{% url 'app:category' collection_type cat.id %}">{{ cat.name }}</a>
              </h5>

              {% if cat.subcategories.exists %}
                <ul class="list-unstyled small mb-3">
                  {% for sub in cat.subcategories.all %}
                    <li>
                      <a href="{% url 'app:subcategory' collection_type sub.id %}">{{ sub.name }}</a>
                    </li>
                  {% empty %}
                    <li class="text-muted">No subcategories</li>
                  {% endfor %}
                </ul>
              {% endif %}

              <div class="mt-auto">
                <a class="btn btn-sm btn-outline-primary" href="{% url 'app:category' collection_type cat.id %}">
                  View Category
                </a>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-info">No categories available.</div>
  {% endif %}
</div>
{% endblock %}
